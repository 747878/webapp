<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Plus+Jakarta+Sans%3Awght%40400%3B500%3B700%3B800"
    />

    <title>Stitch Design</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body>
    <div
      class="relative flex size-full min-h-screen flex-col bg-[#fcf8f8] group/design-root overflow-x-hidden"
      style="--checkbox-tick-svg: url('data:image/svg+xml,%3csvg viewBox=%270 0 16 16%27 fill=%27rgb(252,248,248)%27 xmlns=%27http://www.w3.org/2000/svg%27%3e%3cpath d=%27M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z%27/%3e%3c/svg%3e'); --select-button-svg: url('data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724px%27 height=%2724px%27 fill=%27rgb(153,77,81)%27 viewBox=%270 0 256 256%27%3e%3cpath d=%27M181.66,170.34a8,8,0,0,1,0,11.32l-48,48a8,8,0,0,1-11.32,0l-48-48a8,8,0,0,1,11.32-11.32L128,212.69l42.34-42.35A8,8,0,0,1,181.66,170.34Zm-96-84.68L128,43.31l42.34,42.35a8,8,0,0,0,11.32-11.32l-48-48a8,8,0,0,0-11.32,0l-48,48A8,8,0,0,0,85.66,85.66Z%27%3e%3c/path%3e%3c/svg%3e'); font-family: &quot;Plus Jakarta Sans&quot;, &quot;Noto Sans&quot;, sans-serif;"
    >
      <div class="layout-container flex h-full grow flex-col">
        <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#f3e7e8] px-10 py-3">
          <div class="flex items-center gap-4 text-[#1b0e0e]">
            <div class="size-4">
              <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_6_330)">
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M24 0.757355L47.2426 24L24 47.2426L0.757355 24L24 0.757355ZM21 35.7574V12.2426L9.24264 24L21 35.7574Z"
                    fill="currentColor"
                  ></path>
                </g>
                <defs>
                  <clipPath id="clip0_6_330"><rect width="48" height="48" fill="white"></rect></clipPath>
                </defs>
              </svg>
            </div>
            <h2 class="text-[#1b0e0e] text-lg font-bold leading-tight tracking-[-0.015em]">FlavorPlate</h2>
          </div>
          <div class="flex flex-1 justify-end gap-8">
            <div class="flex items-center gap-9">
              <a class="text-[#1b0e0e] text-sm font-medium leading-normal" href="{{ url_for('index') }}">Home</a>
              <a class="text-[#1b0e0e] text-sm font-medium leading-normal" href="#">Menu</a> <!-- Link to menu page -->
              <a class="text-[#1b0e0e] text-sm font-medium leading-normal" href="#">Catering</a> <!-- Placeholder -->
              {% if current_user.is_authenticated %}
              <a class="text-[#1b0e0e] text-sm font-medium leading-normal" href="{{ url_for('make_reservation') }}">Make a Reservation</a>
              <a class="text-[#1b0e0e] text-sm font-medium leading-normal" href="{{ url_for('my_reservations') }}">My Reservations</a>
              {% endif %}
              <a class="text-[#1b0e0e] text-sm font-medium leading-normal" href="#">Rewards</a> <!-- Placeholder -->
            </div>
            <div class="flex items-center gap-2">
                {% if current_user.is_authenticated %}
                    <span class="text-[#1b0e0e] text-sm font-medium">Hi, {{ current_user.username }}</span>
                    <a href="{{ url_for('logout') }}"
                       class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-[#e92932] text-[#fcf8f8] text-sm font-bold leading-normal tracking-[0.015em]">
                        <span class="truncate">Logout</span>
                    </a>
                {% else %}
                    <a href="{{ url_for('login') }}"
                       class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-[#e92932] text-[#fcf8f8] text-sm font-bold leading-normal tracking-[0.015em]">
                        <span class="truncate">Sign In</span>
                    </a>
                    <a href="{{ url_for('register') }}"
                       class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-[#e92932] text-[#fcf8f8] text-sm font-bold leading-normal tracking-[0.015em]">
                        <span class="truncate">Register</span>
                    </a>
                {% endif %}
              <button
                class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 bg-[#f3e7e8] text-[#1b0e0e] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5"
              >
                <div class="text-[#1b0e0e]" data-icon="MagnifyingGlass" data-size="20px" data-weight="regular">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                    <path
                      d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"
                    ></path>
                  </svg>
                </div>
              </button>
              <button
                class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 bg-[#f3e7e8] text-[#1b0e0e] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5"
              >
                <div class="text-[#1b0e0e]" data-icon="ShoppingBag" data-size="20px" data-weight="regular">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                    <path
                      d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,160H40V56H216V200ZM176,88a48,48,0,0,1-96,0,8,8,0,0,1,16,0,32,32,0,0,0,64,0,8,8,0,0,1,16,0Z"
                    ></path>
                  </svg>
                </div>
              </button>
            </div>
          </div>
        </header>
        <div class="px-40 flex flex-1 justify-center py-5">
          <div class="layout-content-container flex flex-col w-[512px] max-w-[512px] py-5 max-w-[960px] flex-1">
            <div class="flex flex-wrap gap-2 p-4">
              <a class="text-[#994d51] text-base font-medium leading-normal" href="#">Menu</a>
              <span class="text-[#994d51] text-base font-medium leading-normal">/</span>
              <span class="text-[#1b0e0e] text-base font-medium leading-normal">Sandwiches</span>
            </div>
            <div id="menu-item-details" data-item-id="item_gcs" data-item-name="Grilled Chicken Sandwich" data-item-price="12.99">
                <h1 class="text-[#1b0e0e] text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 text-left pb-3 pt-5 item-name">Grilled Chicken Sandwich</h1>
                <p class="text-[#1b0e0e] text-base font-normal leading-normal pb-3 pt-1 px-4 item-description">
                  A classic grilled chicken sandwich featuring a juicy, marinated chicken breast, crisp lettuce, ripe tomato slices, and a tangy honey mustard sauce, all nestled
                  between two slices of toasted sourdough bread.
                </p>
            </div>
            </p>
            <div class="flex w-full grow bg-[#fcf8f8] @container p-4">
              <div class="w-full gap-1 overflow-hidden bg-[#fcf8f8] @[480px]:gap-2 aspect-[3/2] rounded-xl flex">
                <div
                  class="w-full bg-center bg-no-repeat bg-cover aspect-auto rounded-none flex-1"
                  style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuD3e2p2EsAbmQBWuh0o_IDZror8enWNl1FGxbBRbEHeVjFqkOBal_ZtNw-DIPsR2c8BBD5OFoej5U2aGsAJCpTlbNqakIQkqA6HlvLngCgm4O4ex-s6mLrqqyr8yg0No-ioEKqS8_x72njDUpbB46pDdL89BgVcOwJ7Iuj163e9SgKciVxzSsfhmjIKreTWMWJmZKBYoRJqErcgGVRxxUwn0mgzdXkxPGh8KfhLEi0e_bQGJWQtYEFApxxC-sesPlSYQO4gMIgTxEg");'
                ></div>
              </div>
            </div>
            <h3 class="text-[#1b0e0e] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4">Customize</h3>
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <p class="text-[#1b0e0e] text-base font-medium leading-normal pb-2">Bread</p>
                <select id="customization-bread"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#1b0e0e] focus:outline-0 focus:ring-0 border border-[#e7d0d1] bg-[#fcf8f8] focus:border-[#e7d0d1] h-14 bg-[image:--select-button-svg] placeholder:text-[#994d51] p-[15px] text-base font-normal leading-normal"
                >
                  <option value="sourdough">Sourdough</option>
                  <option value="whole_wheat">Whole Wheat</option>
                  <option value="white">White</option>
                </select>
              </label>
            </div>
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <p class="text-[#1b0e0e] text-base font-medium leading-normal pb-2">Sauce</p>
                <select id="customization-sauce"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#1b0e0e] focus:outline-0 focus:ring-0 border border-[#e7d0d1] bg-[#fcf8f8] focus:border-[#e7d0d1] h-14 bg-[image:--select-button-svg] placeholder:text-[#994d51] p-[15px] text-base font-normal leading-normal"
                >
                  <option value="honey_mustard">Honey Mustard</option>
                  <option value="mayonnaise">Mayonnaise</option>
                  <option value="chipotle_aioli">Chipotle Aioli</option>
                </select>
              </label>
            </div>
            <h3 class="text-[#1b0e0e] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4">Add-ons</h3>
            <div class="px-4" id="customization-addons">
              <label class="flex gap-x-3 py-3 flex-row">
                <input
                  type="checkbox" value="extra_chicken"
                  class="h-5 w-5 rounded border-[#e7d0d1] border-2 bg-transparent text-[#e92932] checked:bg-[#e92932] checked:border-[#e92932] checked:bg-[image:--checkbox-tick-svg] focus:ring-0 focus:ring-offset-0 focus:border-[#e7d0d1] focus:outline-none"
                />
                <p class="text-[#1b0e0e] text-base font-normal leading-normal">Extra Chicken</p>
              </label>
              <label class="flex gap-x-3 py-3 flex-row">
                <input
                  type="checkbox" value="avocado"
                  class="h-5 w-5 rounded border-[#e7d0d1] border-2 bg-transparent text-[#e92932] checked:bg-[#e92932] checked:border-[#e92932] checked:bg-[image:--checkbox-tick-svg] focus:ring-0 focus:ring-offset-0 focus:border-[#e7d0d1] focus:outline-none"
                />
                <p class="text-[#1b0e0e] text-base font-normal leading-normal">Avocado</p>
              </label>
              <label class="flex gap-x-3 py-3 flex-row">
                <input
                  type="checkbox" value="bacon"
                  class="h-5 w-5 rounded border-[#e7d0d1] border-2 bg-transparent text-[#e92932] checked:bg-[#e92932] checked:border-[#e92932] checked:bg-[image:--checkbox-tick-svg] focus:ring-0 focus:ring-offset-0 focus:border-[#e7d0d1] focus:outline-none"
                />
                <p class="text-[#1b0e0e] text-base font-normal leading-normal">Bacon</p>
              </label>
            </div>
            <h3 class="text-[#1b0e0e] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4">Price</h3>
            <p class="item-price text-[#1b0e0e] text-base font-normal leading-normal pb-3 pt-1 px-4">$12.99</p>
            <div class="flex px-4 py-3">
              <button id="add-to-cart-selection"
                class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 flex-1 bg-[#e92932] text-[#fcf8f8] text-sm font-bold leading-normal tracking-[0.015em]"
              >
                <span class="truncate">Add to Cart</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="{{ url_for('static', filename='js/cart.js') }}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            updateCartDisplay(); // Initialize cart display

            const addToCartButton = document.getElementById('add-to-cart-selection');
            if (addToCartButton) {
                addToCartButton.addEventListener('click', () => {
                    const itemDetailsDiv = document.getElementById('menu-item-details');
                    const itemId = itemDetailsDiv.dataset.itemId;
                    const itemName = itemDetailsDiv.dataset.itemName;
                    const itemPrice = parseFloat(itemDetailsDiv.dataset.itemPrice);

                    const selectedBread = document.getElementById('customization-bread').value;
                    const selectedSauce = document.getElementById('customization-sauce').value;
                    
                    const selectedAddons = [];
                    document.querySelectorAll('#customization-addons input[type="checkbox"]:checked').forEach(checkbox => {
                        selectedAddons.push(checkbox.value);
                    });

                    const customizations = {
                        bread: selectedBread,
                        sauce: selectedSauce,
                        addons: selectedAddons
                    };

                    if (itemId && itemName && !isNaN(itemPrice)) {
                        addToCart(itemId, itemName, itemPrice, customizations);
                    } else {
                        console.error('Could not add item to cart. Missing base item data.');
                        alert('Error: Could not retrieve item details to add to cart.');
                    }
                });
            }
        });
    </script>
  </body>
</html>
